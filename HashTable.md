# Hash 
hash即是将本身的键值，通过特定的数学函数运算或者使用其他的方法，转换成对应的数据存储地址；其中所用数学函数称为“哈希函数”（hash function);

哈希函数相关名词：

* bucket桶：哈希表中存储数据的位置中，每一个位置对应到唯一的一个地址（bucket address）； 而bucket就是一个记录。

* slot槽：每一个记录中可能包含好几个字段，而slot指的就是桶中的某个字段。
 
* collision碰撞：若两项不同的数据，经过哈希函数运算后，对应到相同的地址时，就称作碰撞；

* 溢出：如果数据经过哈希函数运算后发生碰撞，则对应的bucket已满，会使得bucket产生溢出。

* hash table哈希表: 存储记录的连续内存； 哈希表是一种类似数据表的索引表格，其中可分为n个bucket，每个bucket又分为m个slot。


 索引 | 姓名 | 电话 | 注释
 ---- | ---- | ---- | ----
 1 | allen | 07-772-1234 | <--- 此为一个bucket
 2 | jacky | 07-772-5525 | 
 3 | may | 07-772-6604 | 
  x|   slot  | slot |
  
  
* synonym同义词：当两个标识符I1和I2，经哈希函数运算后所得数值相同，即f(I1)=f(I2),则称I1和I2对于f这个哈希函数是同义词；

* perfect hashing完美哈希： 指无碰撞无溢出的哈希函数


## 设计hash表时应遵循的几个原则：
1. 降低碰撞和溢出的产生
2. 哈希函数不宜过于复杂，越容易计算越佳
3. 尽量将文字的键值转换为数字的键值，以利于哈希函数的计算
4. 所设计的哈希函数计算得到的值，尽量能均匀地分布在每一个bucket中，不要太过于集中于某些桶内，这样可以减少碰撞，减少溢出的处理

## 常见的哈希函数

* 除留余数法

最简单的哈希函数；
将数据除以某一个常数后，取余数当做索引；
>f(key) = key mod n;

* 平方取中法

先计算数据的平方，之后取中间某段数作为索引；

> 比如一组数据平方后，去百位和十位数作为键值(这样的话共有00-99一百个地址空间）

* 折叠法

折叠法是将数据转换为一串数字后，先将这串数字拆成几个部分，再将各部分加起来，结果即为其索引；称为“移动折叠法”；


 另外还有边界折叠法folding at the boundaries;
 
 * 数字分析法
 
 适用于数据不会更改，且为数字类型的静态表；在决定哈希函数时先注意检查数据的相对位置和分布情况，将重复性高的部分删除。
 
 
## 碰撞与溢出问题的处理
没有一种哈希函数能够确保数据经过哈希运算后所得到的索引值都是唯一的；

当索引值重复时就会产生碰撞，而碰撞在数据量大的时候容易发生；
下面简单描述几种处理碰撞后溢出问题的溢出处理方法。

* 线性探测法


> 线性探测法是当发生碰撞时，若该索引对应的位置已有数据, 则以线性的方式往后继续寻找空的存储位置，一旦找到就将数据放进去；
> 
> 缺点：类似的键值经常会聚集在一起



* 平方探测法

* 再哈希

> 再哈希就是一开始先设置一系列的哈希函数，若第一种哈希函数出现溢出，则改用第二种，一直到不再发生溢出为止；


* 链表
 
> 将哈希表的所有空间建立n个链表；
> 
> 最初n个链表头；
> 
> 如果发生溢出，就把相同地址的键值连接在链表头的后边，行成一个链表，直到所有的可用空间用完为止；